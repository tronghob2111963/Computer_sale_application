<div class="p-6 space-y-4">
  <!-- Header -->
  <div class="flex items-center justify-between">
    <h1 class="text-2xl font-bold">Quản lý phiếu nhập kho</h1>
    <button (click)="create()" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
      + Tạo phiếu nhập
    </button>
  </div>

  <!-- Messages -->
  <div *ngIf="error" class="p-3 bg-red-100 text-red-700 rounded">{{ error }}</div>
  <div *ngIf="successMessage" class="p-3 bg-green-100 text-green-700 rounded">{{ successMessage }}</div>

  <!-- Filters -->
  <div class="bg-white p-4 rounded border space-y-3">
    <h3 class="font-semibold text-gray-700">Bộ lọc</h3>
    <div class="flex flex-wrap gap-4 items-end">
      <!-- Filter by Status -->
      <div class="flex flex-col">
        <label class="text-sm text-gray-600 mb-1">Trạng thái</label>
        <select [(ngModel)]="filterStatus" (change)="filterByStatus()" class="px-3 py-2 border rounded min-w-[150px]">
          <option value="">Tất cả</option>
          <option value="PENDING">Đang xử lý</option>
          <option value="COMPLETED">Hoàn thành</option>
          <option value="CANCELLED">Đã hủy</option>
        </select>
      </div>

      <!-- Filter by Date Range -->
      <div class="flex flex-col">
        <label class="text-sm text-gray-600 mb-1">Từ ngày</label>
        <input type="date" [(ngModel)]="filterStartDate" class="px-3 py-2 border rounded">
      </div>
      <div class="flex flex-col">
        <label class="text-sm text-gray-600 mb-1">Đến ngày</label>
        <input type="date" [(ngModel)]="filterEndDate" class="px-3 py-2 border rounded">
      </div>
      <button (click)="filterByDateRange()" class="px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700">
        Lọc theo ngày
      </button>
      <button (click)="clearFilters()" class="px-4 py-2 border rounded hover:bg-gray-100">
        Xóa bộ lọc
      </button>
    </div>
  </div>

  <!-- Table -->
  <div class="overflow-x-auto bg-white rounded border">
    <table class="min-w-full">
      <thead class="bg-gray-50">
        <tr>
          <th class="px-4 py-3 text-left text-sm font-semibold text-gray-700">Mã phiếu</th>
          <th class="px-4 py-3 text-left text-sm font-semibold text-gray-700">Nhân viên</th>
          <th class="px-4 py-3 text-left text-sm font-semibold text-gray-700">Ngày nhập</th>
          <th class="px-4 py-3 text-right text-sm font-semibold text-gray-700">Tổng tiền</th>
          <th class="px-4 py-3 text-center text-sm font-semibold text-gray-700">Trạng thái</th>
          <th class="px-4 py-3 text-right text-sm font-semibold text-gray-700">Thao tác</th>
        </tr>
      </thead>
      <tbody *ngIf="!loading; else loadingTmpl">
        <tr *ngFor="let r of receipts" class="border-t hover:bg-gray-50">
          <td class="px-4 py-3 font-medium">{{ r.receiptCode }}</td>
          <td class="px-4 py-3">{{ r.employeeName }}</td>
          <td class="px-4 py-3">{{ r.createdAt | date:'dd/MM/yyyy HH:mm' }}</td>
          <td class="px-4 py-3 text-right font-medium">{{ r.totalAmount | number:'1.0-0' }} đ</td>
          <td class="px-4 py-3 text-center">
            <span [class]="'px-2 py-1 rounded text-xs font-medium ' + getStatusClass(r.status)">
              {{ getStatusText(r.status) }}
            </span>
          </td>
          <td class="px-4 py-3 text-right space-x-2">
            <button class="px-3 py-1 border rounded hover:bg-gray-100" (click)="view(r)">
              Chi tiết
            </button>
            <button *ngIf="r.status === 'COMPLETED'" class="px-3 py-1 bg-red-100 text-red-700 rounded hover:bg-red-200"
              (click)="cancelReceipt(r)">
              Hủy
            </button>
          </td>
        </tr>
        <tr *ngIf="!receipts.length">
          <td colspan="6" class="px-4 py-10 text-center text-gray-500">
            Chưa có phiếu nhập nào
          </td>
        </tr>
      </tbody>
    </table>
    <ng-template #loadingTmpl>
      <tbody>
        <tr>
          <td colspan="6" class="p-8 text-center text-gray-500">Đang tải dữ liệu...</td>
        </tr>
      </tbody>
    </ng-template>
  </div>
</div>