<section class="product-page" *ngIf="!loading && product; else loadingTpl">
  <nav class="breadcrumb">
    <a routerLink="/">Trang ch·ªß</a>
    <span>/</span>
    <a routerLink="/">S·∫£n ph·∫©m</a>
    <span>/</span>
    <span class="current">{{ product?.name }}</span>
  </nav>

  <div class="product-main">
    <div class="gallery">
      <div class="image-wrap">
        <img class="main" [src]="product?.images?.[0] || '/placeholder/product.png'" [alt]="product?.name" />
        <div class="badge sale" *ngIf="discountPercent as d">-{{ d }}% OFF</div>
      </div>
      <div class="thumbs">
        <img *ngFor="let img of product?.images" [src]="img" [alt]="product?.name" (click)="selectImage(img)" [class.active]="img===product?.images?.[0]" />
      </div>
    </div>

    <div class="info">
      <h1 class="title">{{ product?.name }}</h1>
      <div class="meta">
        <div class="status"><span class="dot" [class.ok]="(product?.stock ?? 0) > 0"></span>T√¨nh tr·∫°ng: {{ inStockLabel }}</div>
        <div class="brand">Th∆∞∆°ng hi·ªáu: <b>{{ product?.brandName || 'ƒêang c·∫≠p nh·∫≠t' }}</b></div>
      </div>

      <div class="price-row">
        <div class="price">{{ product?.price | number:'1.0-0' }} ‚Ç´</div>
        <div class="original" *ngIf="product?.originalPrice && product?.originalPrice > product?.price">{{ product?.originalPrice | number:'1.0-0' }} ‚Ç´</div>
        <div class="discount" *ngIf="discountPercent as d">-{{ d }}%</div>
      </div>

      <div class="qty-row">
        <div class="stepper">
          <button (click)="decQty()">-</button>
          <input type="number" min="1" [(ngModel)]="qty"/>
          <button (click)="incQty()">+</button>
        </div>
      </div>

      <div class="actions">
        <button class="btn btn-outline" (click)="addToCart()">Th√™m v√†o gi·ªè</button>
        <button class="btn btn-primary" (click)="addToCart()">Mua ngay</button>
      </div>

      <div class="share">
        <span>Chia s·∫ª:</span>
        <a aria-label="Facebook">f</a>
        <a aria-label="Messenger">m</a>
        <a aria-label="Pinterest">p</a>
        <a aria-label="Link">üîó</a>
      </div>
    </div>

    <aside class="sidebar">
      <div class="policy-card">
        <h4>Ch√≠nh s√°ch b√°n h√†ng</h4>
        <ul>
          <li>Cam k·∫øt 100% ch√≠nh h√£ng</li>
          <li>H·ªó tr·ª£ 24/7</li>
        </ul>
        <h4>Th√¥ng tin th√™m</h4>
        <ul>
          <li>Ho√†n ti·ªÅn 111% n·∫øu h√†ng gi·∫£</li>
          <li>M·ªü h·ªôp ki·ªÉm tra nh·∫≠n h√†ng</li>
          <li>ƒê·ªïi tr·∫£ trong 7 ng√†y</li>
        </ul>
      </div>
      <img class="banner" src="/banners/slide_2.jpg" alt="Khuy·∫øn m√£i" onerror="this.style.display='none'" />
    </aside>
  </div>

  <section class="description">
    <h3>M√¥ t·∫£ s·∫£n ph·∫©m</h3>
    <div class="content">{{ product?.description || 'ƒêang c·∫≠p nh·∫≠t...' }}</div>
  </section>
</section>

<ng-template #loadingTpl>
  <div class="state">ƒêang t·∫£i chi ti·∫øt...</div>
  <div *ngIf="error" class="state error">{{ error }}</div>
</ng-template>

