<!-- Banner/hero area với overlay và animation -->
<section class="hero">
  <div class="hero-inner">
    <div class="hero-left">
      <div class="hero-overlay">
        <div class="hero-content">
          <h1 class="hero-title">Chào mừng đến cửa hàng</h1>
          <p class="hero-subtitle">Khám phá những sản phẩm tuyệt vời nhất</p>
          <button class="hero-btn">Mua sắm ngay</button>
        </div>
      </div>
      <img src="/banners/main-1.jpg" alt="Banner chính" onerror="this.src='/banners/slide_1.jpg'" />
    </div>
    <div class="hero-right">
      <div class="hero-card">
        <img src="/banners/slide_1.jpg" alt="Banner phụ" onerror="this.style.display='none'" />
        <div class="hero-card-overlay">
          <span class="hero-card-text">Sản phẩm hot</span>
        </div>
      </div>
      <div class="hero-card">
        <img src="/banners/slide_2.jpg" alt="Banner phụ" onerror="this.style.display='none'" />
        <div class="hero-card-overlay">
          <span class="hero-card-text">Giảm giá sốc</span>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Products grid với animation và badges -->
<section class="products">
  <div class="category-indicator" *ngIf="categoryName">
    <span>Đang xem: <strong>{{ categoryName }}</strong></span>
    <a [routerLink]="['/']" [queryParams]="{}" class="clear-filter">Bỏ lọc</a>
  </div>
  <div class="section-header">
    <div class="header-left">
      <h2>Sản phẩm mới</h2>
      <span class="badge">{{ products?.length ? products.length : 0 }} sản phẩm</span>
    </div>
    <button class="refresh" (click)="refresh()">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2" />
      </svg>
      Làm mới
    </button>
  </div>

  <div *ngIf="loading" class="state">
    <div class="loader"></div>
    <p>Đang tải sản phẩm…</p>
  </div>

  <div *ngIf="error" class="state error">
    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <circle cx="12" cy="12" r="10"></circle>
      <line x1="12" y1="8" x2="12" y2="12"></line>
      <line x1="12" y1="16" x2="12.01" y2="16"></line>
    </svg>
    <p>{{ error }}</p>
  </div>

  <div class="grid" *ngIf="!loading && !error">
    <div class="card" *ngFor="let p of products; let i = index" [style.animation-delay]="(i * 0.05) + 's'">
      <div class="card-badge">Mới</div>
      <div class="thumb">
        <img [src]="p?.displayImage ? p.displayImage : '/placeholder/product.png'" [alt]="p?.name" />
        <div class="thumb-overlay">
          <button class="quick-view" [routerLink]="['/product', p?.id]">Chi tiết</button>
        </div>
      </div>
      <div class="body">
        <div class="name" [title]="p?.name">{{ p?.name }}</div>
        <div class="rating">
          <span class="stars">★★★★★</span>
          <span class="reviews">({{ (i % 50) + 10 }})</span>
        </div>
        <div class="price-row">
          <span class="price">{{ (p?.price != null ? p.price : 0) | number:'1.0-0' }} ₫</span>
          <span class="original-price" *ngIf="i % 3 === 0">{{ (p?.price != null ? (p.price * 1.3) : 0) | number:'1.0-0' }} ₫</span>
        </div>
      </div>
      <div class="actions">
        <button class="btn btn-cart" (click)="addToCart(p)">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="9" cy="21" r="1"></circle>
            <circle cx="20" cy="21" r="1"></circle>
            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
          </svg>
          Thêm vào giỏ
        </button>
      </div>
    </div>
  </div>
</section>
