<section class="hero">
  <div class="hero-inner">
    <div class="hero-copy">
      <p class="eyebrow">Build · Game · Workstation</p>
      <h1>Trạm chiến tối ưu theo túi tiền</h1>
      <p class="hero-subtitle">
        Chọn linh kiện, build PC theo nhu cầu của bạn với sự tư vấn từ chuyên gia của chúng tôi.
      </p>
      <div class="hero-buttons">
        <button class="hero-btn" [routerLink]="['/pc-builder']">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
            <line x1="8" y1="21" x2="16" y2="21"></line>
            <line x1="12" y1="17" x2="12" y2="21"></line>
          </svg>
          Build PC ngay
        </button>
        <button class="hero-btn hero-btn-secondary" [routerLink]="['/my-builds']">
          Xem bộ sưu tập
        </button>
      </div>
      <div class="hero-meta">
        <div class="meta-card">
          <div class="meta-icon">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
            </svg>
          </div>
          <div>
            <p class="meta-title">Chính hãng 100%</p>
            <span>Đầy đủ tem, phiếu và bảo hành rõ ràng</span>
          </div>
        </div>
        <div class="meta-card">
          <div class="meta-icon">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M3 5h18"></path>
              <path d="M3 12h18"></path>
              <path d="M3 19h18"></path>
            </svg>
          </div>
          <div>
            <p class="meta-title">Combo tinh gọn</p>
            <span>Gợi ý cấu hình toàn diện, hợp lý theo nhu cầu</span>
          </div>
        </div>
        <div class="meta-card">
          <div class="meta-icon">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"></circle>
              <path d="M12 6v6l3 3"></path>
            </svg>
          </div>
          <div>
            <p class="meta-title">Hỗ Trợ nhanh</p>
            <span>Hợp lý, tư vấn, bảo hành 24/7</span>
          </div>
        </div>
      </div>
    </div>

    <div class="hero-showcase">
      <div class="hero-main-card">
        <img src="/banners/main-1.jpg" alt="Banner chính" onerror="this.src='/banners/slide_1.jpg'" />
        <div class="floating-label">Spotlight build</div>
        <div class="main-card-footer">
          <div>
            <p class="footer-title">Combo RTX nhiều màu sắc</p>
            <span class="footer-sub">Gia công trước, tối ưu tản nhiệt và độ ồn</span>
          </div>
          <button class="ghost-link" [routerLink]="['/pc-builder']">Xem chi tiet</button>
        </div>
      </div>
      <div class="hero-tiles">
        <div class="hero-card">
          <img src="/banners/slide_1.jpg" alt="Banner phụ" onerror="this.style.display='none'" />
          <div class="hero-card-overlay">
            <span class="hero-card-text">Setup hot từ gamer</span>
          </div>
        </div>
        <div class="hero-card">
          <img src="/banners/slide_2.jpg" alt="Banner phụ" onerror="this.style.display='none'" />
          <div class="hero-card-overlay">
            <span class="hero-card-text">Deal linh kiện giảm sâu</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="products" *ngFor="let section of sections; let sIdx = index">
  <div class="section-shell">
    <div class="section-header section-inline">
      <div class="header-left">
        <div class="section-dot"></div>
        <div class="section-text">
          <p class="section-kicker">Danh mục đề xuất</p>
          <h2>{{ section.title }}</h2>
        </div>
        <span class="badge type">{{ getSelectedTabLabel(section) || 'Tất cả' }}</span>
        <span class="badge count">{{ section.products.length || 0 }} sp</span>
      </div>
      <div class="header-actions">
        <div class="type-filter" *ngIf="section.tabs.length">
          <button class="chip" *ngFor="let t of section.tabs" [class.active]="section.selectedTypeId === t.typeId"
            (click)="selectSectionTab(section, t)">
            {{ t.label }}
          </button>
        </div>
        <button class="ghost-link ghost-small" *ngIf="section.products.length">Xem tat ca</button>
      </div>
    </div>

    <div class="section-body">
      <div class="section-banner">
        <img [src]="section.banner" alt="banner" onerror="this.style.opacity=0.25" />
        <div class="banner-overlay">
          <p class="banner-label">Chien luoc nang cap</p>
          <p class="banner-text">Can bang gia/ hieu nang, giam nhiet, tang FPS</p>
        </div>
        <button class="banner-cta" *ngIf="section.cta">{{ section.cta }}</button>
      </div>

      <div class="section-grid">
        <div *ngIf="section.loading" class="state"><div class="loader"></div></div>
        <div class="grid" *ngIf="!section.loading">
          <div class="card" *ngFor="let p of section.products; let i = index" [style.animation-delay]="(i * 0.05) + 's'">
            <div class="card-badge">Moi</div>
            <div class="thumb">
              <img [src]="p?.displayImage ? p.displayImage : '/placeholder/product.png'" [alt]="p?.name" />
              <div class="thumb-overlay">
                <button class="quick-view" [routerLink]="['/product', p?.id]">Chi tiet</button>
              </div>
            </div>
            <div class="body">
              <div class="name" [title]="p?.name">{{ p?.name }}</div>
              <div class="subtext">San hang, giao nhanh</div>
              <div class="rating">
                <div class="stars">
                  <svg *ngFor="let _ of stars" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                    stroke-width="2">
                    <polygon points="12 2 15 9 22 9 17 14 19 21 12 17 5 21 7 14 2 9 9 9 12 2"></polygon>
                  </svg>
                </div>
                <span class="reviews">({{ (i % 50) + 10 }})</span>
              </div>
              <div class="price-row">
                <span class="price">{{ (p?.price != null ? p.price : 0) | number:'1.0-0' }} VND</span>
                <span class="original-price" *ngIf="i % 3 === 0">{{ (p?.price != null ? (p.price * 1.3) : 0) | number:'1.0-0'
                  }} VND</span>
              </div>
            </div>
            <div class="actions">
              <button class="btn btn-cart" (click)="addToCart(p)">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="9" cy="21" r="1"></circle>
                  <circle cx="20" cy="21" r="1"></circle>
                  <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                </svg>
                Them vao gio
              </button>
            </div>
          </div>
        </div>
        <div class="cta-row" *ngIf="section.products.length">
          <button class="cta-link">Xem Tất cả {{ getSelectedTabLabel(section) }}</button>
        </div>
      </div>
    </div>
  </div>
</section>
